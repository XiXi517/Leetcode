# No303.区域和检索-数组不可变



## 1.题目描述

给定一个整数数组  nums，求出数组从索引 i 到 j  (i ≤ j) 范围内元素的总和，包含 i,  j 两点。

示例：

给定 nums = [-2, 0, 3, -5, 2, -1]，求和函数为 sumRange()

sumRange(0, 2) -> 1
sumRange(2, 5) -> -1
sumRange(0, 5) -> -3

说明:

1. 你可以假设数组不可变。
2. 会多次调用 sumRange 方法。



## 2.思路

​	1）暴力求解法（超时）：每次调用 sumrange 时，我们都使用for循环将索引 i 到 j 之间的每个元素相加。 

​	2）缓存解法：

​		假设我们预先计算了从数字 0 到 k 的累积和。用这个信息得出 sum(i，j)
		我们将 sum[k] 定义为 nums[0... k-1] 的累积和（包括这两个值）,k= 0 时。sum[0] = 0
		现在，我们可以计算 sumrange 如下：  sumrange（i，j）=sum[j+1]-sum[i]



## 3.暴力求解法

~~~java
class NumArray {

    private int[] data;
    
    public NumArray(int[] nums) {
       this.data = nums; 
    }
   
    public int sumRange(int i, int j) {
        int sum = 0;
        for (int m = i;m <= j;m++){
            sum = sum + data[m];
        }
        return sum;

    }
}

/**
 * Your NumArray object will be instantiated and called as such:
 * NumArray obj = new NumArray(nums);
 * int param_1 = obj.sumRange(i,j);
 */
~~~





## 4.缓存法

~~~java
class NumArray {

    private int[] data;
    
    public NumArray(int[] nums) {
        data = new int[nums.length+1];
        data[0] = 0;
        for(int i = 1;i < data.length;i++){
            data[i] = data[i-1] + nums[i-1] ;
        }
    }

    public int sumRange(int i, int j) {
        return data[j+1] - data[i];
    }
}

/**
 * Your NumArray object will be instantiated and called as such:
 * NumArray obj = new NumArray(nums);
 * int param_1 = obj.sumRange(i,j);
 */
~~~



关键点：

 	1. 类成员变量写为 private
 	2. 空间换时间，构造方法中预计算时间为O(n方)，成员方法中计算时间为O(1)

